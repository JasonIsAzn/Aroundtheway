@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

@{
    var isLoggedIn = HttpContextAccessor.HttpContext?.User?.Identity?.IsAuthenticated ?? false;
    var isAdmin = HttpContextAccessor.HttpContext?.User?.IsInRole("Admin") ?? false;
}

<nav class="bg-white border-b border-black/5">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-12">
            <div class="flex">
                <div class="flex-shrink-0 flex items-center">
                    <a href="/" class="text-sm font-light tracking-[.15em] uppercase text-black hover:text-gray-600 transition-colors">Aroundtheway</a>
                </div>

                @if (isLoggedIn && isAdmin)
                {
                    <div class="hidden sm:ml-8 sm:flex sm:space-x-8">
                        <a href="/admin" class="text-xs font-light uppercase tracking-[.15em] text-black hover:text-gray-600 transition-colors inline-flex items-center px-1">
                            Admin Dashboard
                        </a>
                        <a href="/admin/debug" class="text-xs font-light uppercase tracking-[.15em] text-black hover:text-gray-600 transition-colors inline-flex items-center px-1">
                            Debug Tools
                        </a>
                    </div>
                }
            </div>

            <div class="hidden sm:ml-6 sm:flex sm:items-center">
                @if (isLoggedIn)
                {
                    <form method="post" action="/api/auth/logout">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="text-xs font-light uppercase tracking-[.15em] text-black hover:text-gray-600 transition-colors inline-flex items-center px-1">
                            Logout
                        </button>
                    </form>
                }
                else
                {
                    <a href="/login" class="text-xs font-light uppercase tracking-[.15em] text-black hover:text-gray-600 transition-colors inline-flex items-center px-1">
                        Login
                    </a>
                }
            </div>
        </div>
    </div>
</nav>
